---
title: Arch配置
date: 2019-09-07 09:33:01
categories:
- 装机配置
tags:
---
# 赋予普通账户sudo权限
`# vi /etc/sudoers`
> 以root账户登录，进入/etc/sudoers，删除wheel前的#号，完成后退出以普通用户登录
# git
```
$ sudo pacman -S git
$ git config --global user.name jiaope
$ git config --global user.email jiaopengyu991212@gmail.com
```
# gvim
```
$ sudo pacman -S gvim
$ vim ~/.vimrc
```
## vimrc中的配置文件
```
set nocompatible              " 去除VI一致性,必须
" 设置包括vundle和初始化相关的runtime path
set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()
" 另一种选择, 指定一个vundle安装插件的路径
" call vundle#begin('~/some/path/here')
" 让vundle管理插件版本,必须
Plugin 'VundleVim/Vundle.vim'
" 以下范例用来支持不同格式的插件安装.
" 请将安装插件的命令放在vundle#begin和vundle#end之间.
" Github上的插件
" 格式为 Plugin '用户名/插件仓库名'
" Plugin 'tpope/vim-fugitive'
" 来自 http://vim-scripts.org/vim/scripts.html 的插件
" Plugin '插件名称' 实际上是 Plugin 'vim-scripts/插件仓库名' 只是此处的用户名可以省略
" Plugin 'L9'
" 由Git支持但不再github上的插件仓库 Plugin 'git clone 后面的地址'
" Plugin 'git://git.wincent.com/command-t.git'
" 本地的Git仓库(例如自己的插件) Plugin 'file:///+本地插件仓库绝对路径'
" Plugin 'file:///home/gmarik/path/to/plugin'
" 插件在仓库的子目录中.
" 正确指定路径用以设置runtimepath. 以下范例插件在sparkup/vim目录下
" Plugin 'rstacruz/sparkup', {'rtp': 'vim/'}
Plugin 'Valloric/YouCompleteMe'
Plugin 'scrooloose/nerdtree'
Plugin 'taglist.vim'
Plugin 'morhetz/gruvbox'
Plugin 'vim-airline/vim-airline'
" 你的所有插件需要在下面这行之前
call vundle#end()            " 必须
filetype plugin indent on    " 必须 加载vim自带和插件相应的语法和文件类型相关脚本
" 简要帮助文档
" :PluginList       - 列出所有已配置的插件
" :PluginInstall    - 安装插件,追加 `!` 用以更新或使用 :PluginUpdate
" :PluginSearch foo - 搜索 foo ; 追加 `!` 清除本地缓存
" :PluginClean      - 清除未使用插件,需要确认; 追加 `!` 自动批准移除未使用插件
" 查阅 :h vundle 获取更多细节和wiki以及FAQ
" 将你自己对非插件片段放在这行之后
set number
set tabstop=4
set incsearch
syntax on              " Syntax highlight.
set mouse=a            " Enable the use of the mouse.
set showcmd
set ruler
set ignorecase
set smartcase
set clipboard=unnamedplus         " 开启全局剪贴板
" vim-aireline
let g:airline#extensions#tabline#enabled = '1'        " 显示上方buffers
let g:airline_powerline_fonts = '1'                   " 使用powerline打过补丁的字体
" 开启真彩色支持
if (has("termguicolors"))
		set termguicolors
endif
" gruvbox
let g:gruvbox_italic = '1'                            " 启用斜体文本
let g:gruvbox_italicize_comments = '1'                " 启用斜体表示评论
let g:gruvbox_contrast_dark = 'soft'
colorscheme gruvbox                                   " 使用gruvbox的颜色背景
set background=dark                                   " 设置gruvbox背景为暗色
```
### vim插件配置
#### YouCompleteMe
```
$ cd ~/.vim/bundle/YouCompleteMe              以下均须要python2/3，cmake的依赖
$ ./install.py --clang-completer              C
$ ./install.py --clangd-completer             C系列
$ ./install.py --java-completer               需安装JDK8
```
### taglist
```
$ sudo pacman -S ctags
$ ctags -R                                    递归的为当前目录及子目录下的所有代码文件生成tags文件
```
# zsh
```
$ echo $SHELL                       查看当前shell
$ sudo pacman -S zsh
```
## oh-my-zsh（手动安装）
```
$ git clone https://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh
$ cp ~/.zshrc ~/.zshrc.orig                                                  可选，备份现有配置
$ cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc                      通过复制我们为您包含的模板来创建新的zsh配置文件 
$ chsh -s $(which zsh)                                                       更换默认shell为zsh
```
### oh-my-zsh插件安装
```
$ git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting
$ git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions
$ git clone git://github.com/makeitjoe/incr.zsh $ZSH_CUSTOM/plugins/incr
```
## zshrc
1.`ZSH_THEME="robbyrussell"` 改为 `ZSH_THEME="ys"`
2.删除`DISABLE_AUTO_UPDATE="true"`前的`#`
3.添加
```   
plugins=(
    git
    zsh-autosuggestions
    incr
    zsh-syntax-highlighting         # 位置必须在最后
    )
```
4.添加以下在末尾
```
# remove the underline for zsh-syntax-highlighting
ZSH_HIGHLIGHT_STYLES[path]=none
ZSH_HIGHLIGHT_STYLES[path_prefix]=none

# 自动补全
# autoload -U compinit
# compinit
# 添加下面的配置可以启动使用方向键控制的自动补全：按两次 tab 键启动菜单
# zstyle ':completion:*' menu select
# 添加下面的配置可以启动命令行别名的自动补全
# setopt completealiases
# 刷新自动补全
# zstyle ':completion:*' rehash true
# 消除历史记录中的重复条目
setopt HIST_IGNORE_DUPS
```
# autojump
`$ sudo pacman -S autojump`
# yay
```
$ cd /tmp
$ git clone https://aur.archlinux.org/yay.git
$ cd yay
$ makepkg -si
$ sudo vim /etc/pacman.conf          删除Color前的#，开启yay的彩色输出
```
# 修改grub引导时间
`$ sudo vim /etc/default/grub`
修改`GRUB_TIMEOUT=0`
`$ sudo update-grub`
# 可视化界面
```
$ sudo pacman -S xorg-server xorg-xinit i3-gaps i3blocks termite
$ cp /etc/X11/xinit/xinitrc ~/.xinitrc
$ vim ~/.xinitrc             删除twm后的，并加入exec i3
$ cp /etc/i3/config ~/.config/i3/config
$ vim ~/.config/i3/config    修改bar里的i3status为i3blocks
$ startx                     进入i3gaps
```
## i3gaps
1.在~/.config/i3/config中大概180多行添加如下配置
```
bindsym Mod4+c exec chromium
# 新窗口的默认边框样式
# default_border normal|none|pixel <px>  " 正常|无|像素 <边框宽度>
default_border pixel 0
# 隐藏屏幕边缘附近的边框
hide_edge_borders both
# disable follows_mouse
focus_follows_mouse no
# inner/outer gap
# gaps inner 10
# gaps outer 5

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
bar {
# bar开启透明度也需要compton
# 此下三行使bar平常状态为隐藏，按Mod1显示
		mode hide
		hidden_state hide
		modifier Mod1
		status_command i3blocks -c ~/.config/i3/i3blocks.conf
}
```
2.在`bindsym Mod1+f fullscreen toggle`前添加`#`      因为这与chromium菜单快捷键冲突
3.在下面code前加`#`                                  也是与chromium快捷键冲突
```
bindsym Mod1+Left focus left
bindsym Mod1+Down focus down
bindsym Mod1+Up focus up
bindsym Mod1+Right focus right

bindsym Mod1+Shift+Left move left
bindsym Mod1+Shift+Down move down
bindsym Mod1+Shift+Up move up
bindsym Mod1+Shift+Right move right
```
## i3blocks
在disk添加
```
[disk]
label=ROOT
instance=/root
separator=false
interval=30
```
# 电池
`$ sudo pacman -S acpi`
# VOL
```
$ sudo pacman -S alsa-utils
$ alsamixer                   标有MM为静音，标有00表示通道已启用，使用m解除静音
```
# Backlight
```
$ sudo pacman -S xorg-xbacklight
$ xbacklight -set 50               亮度设为最大值的50%
$ xbacklight -inc 10               亮度增加10%
$ xbacklight -dec 10               亮度减少10%
```
# Fonts
```
$ sudo pacman -S noto-fonts noto-fonts-cjk noto-fonts-emoji
用户本地字体：下载字体otf文件并放到~/.local/share/fonts，然后更新字体缓存fc-cache -vf 
$ vim ~/.xinitrc
```
以下四行写在fcitx & 和 exec i3 前
```
# 单独在图形界面启用中文locale
#export LANG=zh_CN.UTF-8
#export LANGUAGE=zh_CN:en_US
#export LC_CTYPE=en_US.UTF-8
```
# 输入法
```
$ sudo pacman -S fcitx
$ sudo pacman -S fcitx-libpinyin
$ vim ~/.xinitrc                       在exec i3上一行添加fcitx &
```
# termite
```
$ sudo cp /etc/xdg/termite/config ~/.config/termite/config
font = Fira Mono 9          下载此字体并放到~/.local/share/fonts，然后更新字体缓存fc-cache -vf 
# 以下皆为github上的配置,放在配置文件最后，并把配置文件原来的color0-15注释掉
[colors]
# Base16 Gruvbox dark, soft
# Author: Dawid Kurek (dawikur@gmail.com), morhetz (https://github.com/morhetz/gruvbox)

foreground          = #d5c4a1
foreground_bold     = #ebdbb2
cursor              = #ebdbb2
cursor_foreground   = #32302f
background          = rgba(50, 48, 47)

# 16 color space

# Black, Gray, Silver, White
color0  = #32302f
color8  = #665c54
color7  = #d5c4a1
color15 = #fbf1c7

# Red
color1  = #fb4934
color9  = #fb4934

# Green
color2  = #b8bb26
color10 = #b8bb26

# Yellow
color3  = #fabd2f
color11 = #fabd2f

# Blue
color4  = #83a598
color12 = #83a598

# Purple
color5  = #d3869b
color13 = #d3869b

# Teal
color6  = #8ec07c
color14 = #8ec07c

# Extra colors
color16 = #fe8019
color17 = #d65d0e
color18 = #3c3836
color19 = #504945
color20 = #bdae93
color21 = #ebdbb2
```
# compton
```
$ sudo pacman -S compton   视觉效果合成器，如透明
$ compton -b               以后台进程的形式运行
```
# feh
`$ sudo pacman -S feh`
# mpv
`$ sudo pacman -S mpv`
# Thunar
```
$ sudo pacman -S thunar
$ sudo pacman -S mtpfs jmtpfs gvfs-mtp       手机usb连接电脑传输数据
```
# ranger
```
$ sudo pacman -S ranger
$ ranger --copy-config=all               复制默认配置到~/.config/ranger/
$ sudo pacman -S w3m                     Add the line set preview_images true to your ~/.config/ranger/rc.conf
$ sudo pacman -S ffmpegthumbnailer
$ ranger --copy-config=scope             获取最新scope.sh配置文件，详细进github官方查看
```
# shadowsocks
```
$ sudo pacman -S shadowsocks-libev
$ sudo vim /etc/shadowsocks/config.json
```
```
{
	"server":["103.30.16.133","hk.4.nf369.com","hk.6.nf369.com","us.8.nf369.com"],
	"server_port":64522,
	"local_address":"127.0.0.1",
	"local_port":1080,
	"method":"chacha20-ietf",
	"password":"zMjoeJ",
	"timeout":300
}
```
```
$ sudo systemctl start shadowsocks-libev@config
$ sudo pacman -S proxychains-ng
$ sudo vim /etc/proxychains.conf                 最后一行改为 socks5 127.0.0.1 1080
$ proxychains chromium
$ sudo pacman -S privoxy
$ sudo vim /etc/privoxy/config
```
大概1400行添加以下两行
```
forward-socks5 / 127.0.0.1:1080 .
listen-address   127.0.0.1:8010
```
代理启动chromium
`$ chromium %U --proxy-server=127.0.0.1:8010`
chromium使用switchyomega扩展
> 防火墙规则列表：https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt
# 链接
- [安装 Arch Linux 之后需要做的一些事情](https://www.bilibili.com/video/av57082558)
- [Vim 修行之路](https://harttle.land/vim-practice)
- [morhetz / gruvbox](https://github.com/morhetz/gruvbox/blob/master/README.md)
- [YouCompleteMe](https://github.com/ycm-core/YouCompleteMe/blob/master/README.md#linux-64-bit)
- [一步一步带你安装史上最难安装的 vim 插件 —— YouCompleteMe](https://www.jianshu.com/p/d908ce81017a)
- [VIM自动补齐插件YouCompleteMe安装指南（2019年最新）-Vim插件（15）](https://vimjc.com/vim-youcompleteme-install.html#%E4%B8%80%E3%80%81Vim%E7%89%88%E6%9C%AC%E6%94%AF%E6%8C%81)
- [YouCompleteMe 安装配置方法](https://zhuanlan.zhihu.com/p/35626421)
- [YouCompleteMe实现vim自动补全](https://blog.csdn.net/lyh__521/article/details/46295775)
- [vim安装Taglist（Tlist）插件](https://blog.csdn.net/baidu_35679960/article/details/79111140)
- [Zsh](https://wiki.parabola.nu/Zsh#Alternative_method_without_using_terminfo)
- [robbyrussell / oh-my-zsh](https://github.com/robbyrussell/oh-my-zsh#manual-installation)
- [命令行shell](https://wiki.archlinux.org/index.php/Command-line_shell#Changing_your_default_shell)
- [zsh-users / zsh-syntax-highlighting](https://github.com/zsh-users/zsh-syntax-highlighting/blob/master/INSTALL.md)
- [zsh-users / zsh-autosuggestions](https://github.com/zsh-users/zsh-autosuggestions/blob/master/INSTALL.md)
- [makeitjoe / incr.zsh](https://github.com/makeitjoe/incr.zsh/blob/master/readme.md)
- [wting / autojump](https://github.com/wting/autojump#name)
- [Jguer / yay](https://github.com/Jguer/yay)
- [如何修改GRUB](https://www.jianshu.com/p/a24d51276a82)
- [Advanced Linux Sound Architecture (简体中文)](https://wiki.archlinux.org/index.php/Advanced_Linux_Sound_Architecture_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E5%AE%89%E8%A3%85)
- [Backlight](https://wiki.archlinux.org/index.php/Backlight)
- [Localization/Simplified Chinese (简体中文)](https://wiki.archlinux.org/index.php/Localization/Simplified_Chinese_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E4%B8%AD%E6%96%87%E5%AD%97%E4%BD%93)
- [Fonts (简体中文)](https://wiki.archlinux.org/index.php/Fonts_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E5%AD%97%E4%BD%93%E7%B1%BB%E5%9E%8B)
- [Fcitx (简体中文)](https://wiki.archlinux.org/index.php/Fcitx_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E5%AE%89%E8%A3%85)
- [khamer / base16-termite](https://github.com/khamer/base16-termite)
- [Compton (简体中文)](https://wiki.archlinux.org/index.php/Compton_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87))
- [Feh (简体中文)](https://wiki.archlinux.org/index.php/Feh_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87))
- [mpv (简体中文)](https://wiki.archlinux.org/index.php/Mpv_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E5%AE%89%E8%A3%85)
- [连接Android手机到ArchLinux上](http://blog.lujun9972.win/blog/2018/03/09/%E8%BF%9E%E6%8E%A5android%E6%89%8B%E6%9C%BA%E5%88%B0archlinux%E4%B8%8A/)
- [Ranger (简体中文)](https://wiki.archlinux.org/index.php/Ranger_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E7%94%A8%E6%B3%95)
- [ranger/ranger](https://github.com/ranger/ranger/wiki/Video-Previews)
- [Shadowsocks (简体中文)](https://wiki.archlinux.org/index.php/Shadowsocks_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87))
